// TODO: Refer to https://mrhaki.blogspot.com/2016/01/groovy-goodness-customise-groovydoc.html

// Potential command-line:
//
// groovydoc -d docs -nomainforscripts -windowtitle 'Jenkins Pipeline Scripts' -fileEncoding 'UTF-8' --verbose vars/*.groovy
//

buildscript {
	dependencies {
		localGroovy()
	}
}

plugins {
	id "groovy"
}

repositories {
	jcenter()
}

dependencies {
	// Latest stable release of Groovy - pity we can't just inherit from Gradle
	// C.f. https://stackoverflow.com/a/49120662
	implementation 'org.codehaus.groovy:groovy-all:2.5.7'
}


// This DSL method was added for us by the 'groovy' plugin
groovydoc {

	source = project.file('vars')
	// TODO: place our own template files at the start of the classpath
	// classpath = '????'
	destinationDir = project.file('docs')

	// TODO: Set up all the GroovyDoc task properties

	// Make sure this task always runs. Gradle's default behavior is so annoying.
	outputs.upToDateWhen { false }

}


